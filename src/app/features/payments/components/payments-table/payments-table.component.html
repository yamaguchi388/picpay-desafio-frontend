<div class="filter-header" [formGroup]="formGroup">
  <section>
    <input
      type="text"
      placeholder="nome, usuário ou título"
      formControlName="q"
    />
    <span class="material-symbols-outlined"> search </span>
    <mat-slide-toggle [formControl]="moreFilters">
      Mais filtros
    </mat-slide-toggle>
  </section>
  <section>
    <nz-pagination
      #paginator
      [nzPageIndex]="1"
      [nzTotal]="totalItens$ | async"
      nzSize="small"
    ></nz-pagination>
  </section>
</div>
<section class="more-filters" *ngIf="moreFilters.value" [formGroup]="formGroup">
  <mat-form-field appearance="outline" (click)="picker.open()">
    <mat-label>Período</mat-label>
    <mat-date-range-input [formGroup]="formGroup" [rangePicker]="picker">
      <input matStartDate formControlName="date_gte" placeholder="Start date" />
      <input matEndDate formControlName="date_lte" placeholder="End date" />
    </mat-date-range-input>
    <mat-hint>DD/MM/YYYY – DD/MM/YYYY</mat-hint>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker></mat-date-range-picker>
  </mat-form-field>
  <mat-form-field appearance="outline">
    <mat-label>Status</mat-label>
    <mat-select formControlName="isPayed_like" value="">
      <mat-option *ngFor="let option of options" [value]="option.value">
        {{ option.type }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <button mat-button color="primary" (click)="clearAllFilters()">
    LIMPAR TUDO
  </button>
</section>
<table mat-table [dataSource]="dataSource$ | async" matSort>
  <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->

  <!-- Position Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Usuário</th>
    <td mat-cell *matCellDef="let element">
      <div>
        <span>{{ element.name }}</span>
        <span>{{ element.username }}</span>
      </div>
    </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Título</th>
    <td mat-cell *matCellDef="let element">
      <div>{{ element.title }}</div>
    </td>
  </ng-container>

  <!-- Weight Column -->
  <ng-container matColumnDef="date">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Data</th>
    <td mat-cell *matCellDef="let element">
      <div>
        <span>{{ element.date | date: "dd MMM yyyy" }}</span>
        <span>{{ element.date | date: "hh:mm a" }}</span>
      </div>
    </td>
  </ng-container>

  <!-- Symbol Column -->
  <ng-container matColumnDef="value">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Valor</th>
    <td mat-cell *matCellDef="let element">
      {{ element.value | currency: "BRL" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="isPayed">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Pago</th>
    <td mat-cell *matCellDef="let element">
      <span
        *ngIf="element.isPayed"
        class="material-symbols-outlined"
        style="color: green"
      >
        done
      </span>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let element">
      <button mat-icon-button (click)="save(element)">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button (click)="delete(element)">
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell empty-cell" colspan="4">
      <img src="/assets/empty-box.png" alt="empty" />
    </td>
  </tr>
</table>
